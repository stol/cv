<?php

$experiences = [
    [
        'title' => '2015 / actuellement',
        'start' => "2015-11-01",
        'end' => null,
        'job' => 'Directeur technique',
        'company' => 'Pôle food (Webedia)',
        'link' => 'http://www.750g.com',
        'area' => 'Paris',
        'tasks' => [
            'Management d\'une équipe de 4 développeurs et 1 administrateur système. Deux recrutements : l\'un seul, l\'autre via cabinet',
            'Gestion de <a href="http://www.750g.com" target="_blank">750g.com</a> : site communautaire, 45 millions PV/mois, dev sur mesure sous symfony',
            'Gestion de <a href="https://www.academiedugout.fr" target="_blank">academiedugout.fr</a> & <a href="https://www.allmychefs.com" target="_blank">allmychefs.com</a> : sites e-commerce en français/anglais, 1.6 million PV/mois, dev sur mesure sous symfony',
            'Gestion de petits sites annexes tournant sous magento, wordpress ou PHP natif',
            'Gestion d\'une plateforme infra comportant une trentaine de machines',
            'Prise de poste suite au départ du précédent CTO et de son lead dev',
            'Reprise en main des projets en cours, audit des performances, de la dette technique et de la situation en général',
            'Mise en place de méthodes agiles (SCRUM)',
            'Mise en place de l\'intégration continue et des process associés (code reviews, plateforme de QA, tests unitaires & fonctionnels)',
            'Finalisation d\'une refonte de 750g.com vers SF2 entamée par la précédente équipe',
            'Préparation des sites pour les pics de traffic de Noël (traffic doublé, 14&nbsp;000 visiteurs simultanés le 24 décembre)',
            'Internalisation du hosting de l\'académie, auparavant chez un prestataire d\'hébergement',
            'Migrations diverses au fil du temps : PHP 5.6 vers PHP 7, SF2 vers SF3',
            'Définition de l\'architecture applicative & matérielle (en lien avec l\'équipe exploitation)',
            'Gestion les prestataires, notamment pour le site sous magento ou l\'ancien hosting de l\'académie',
            'Définition et suivi de la roadmap technique',
            '<b>Stack technique</b> : PHP, MySQL, Nginx, Apache, Redis, Symfony 2&nbsp;&&nbsp;3, HAProxy, Varnish, Sphinx, RabbitMQ, Behat, GitLab, JIRA', 

        ],
    ],[
        'title' => '2014 / 2015',
        'start' => "2014-11-01",
        'end' => "2015-11-01",
        'job' => 'Lead Développeur Frontend, R&D et conception',
        'company' => 'Pôle glamour (Webedia)',
        'link' => 'https://www.academiedugout.fr',
        'area' => 'Paris',
        'tasks' => [
            'Interventions et/ou refontes HTML 5 responsive des différents sites du pôle féminin&nbsp;: <a href="http://www.purepeople.com/" target="_blank">Purepeople</a>, <a href="http://www.puretrend.com/" target="_blank">Puretrend</a>, <a href="http://www.purebreak.com/" target="_blank">Purebreak</a>, <a href="http://www.ozap.com/" target="_blank">Puremedia</a>, <a href="http://www.terrafemina.com/" target="_blank">Terrafemina</a>, <a href="http://www.chartsinfrance.net/" target="_blank">Purecharts</a>, <a href="http://www.exponaute.com/" target="_blank">Exponaute</a>',
            'Réalisation de prototypes fonctionnels, artistiques ou techniques',
            'Développement d\'un <a href="https://github.com/webedia-udg/wgs" target="_blank">outil</a> à base de BEM, d\'OOCSS et de diverses conventions. Objectif&nbsp;: poser une structure et une méthodologie stricte, commune à tous les sites',
            'Participation à la conception des sites en lien étroit avec la direction artistique et la direction produit',
            'Lead sur la partie frontend conjointement avec l\'équipe technique',
            'Transferts de connaissances par l\'écriture d\'articles, par l\'exemple et par des démos',
            'Nombreuses contraintes&nbsp;: publicité, performance, UX, SEO, responsive + RTL + multilingue, dialogue inter-pôle',
        ],
    ],[
        'title' => '2013 / 2014',
        'start' => "2013-10-01",
        'end' => "2014-11-01",
        'job' => 'Lead Développeur Frontend',
        'company' => 'Pôle food (Webedia)',
        'link' => 'https://www.academiedugout.fr',
        'area' => 'Paris',
        'tasks' => [
            '<a href="https://www.academiedugout.fr" target="_blank">academiedugout.fr</a>&nbsp;: site développé de zéro, sur le thème de la cuisine des grands chefs.',
            'Architecture et développement de toute la partie frontend du site <a href="https://www.academiedugout.fr" target="_blank">academiedugout.fr</a>, en responsive et mobile first',
            'Conception du site collègiale avec la directon artistique et le produit',
            'Développement d\'une webapp de vidéo interractives et responsives, en angular/sf2/mongoDB',
            'Forte utilisation de méthodologies BEM/OCSS et de Sass pour l\'architecture CSS',
            'Utilisation d\'un gitflow avec feature/fix branches et releases hebdomadaires, sur github',
            'Mise en place de tests fonctionnels automatisés via casperJS',
            'Stack technique&nbsp;: Symfony2, angularJS, Sass, jQuery, bower, grunt, nodeJS, angularsJS, mongodb, mysql',
        ],
    ],[
        'title' => '2012 / 2013',
        'start' => "2012-09-01",
        'end' => "2013-09-01",
        'job' => 'Lead Développeur Frontend',
        'company' => 'Newsring (Webedia)',
        'link' => 'http://debats.terrafemina.com',
        'area' => 'Paris',
        'tasks' => [
            'Contexte&nbsp;: site de débat communautaire (maintenant fermé), avec messagerie et UGC',
            'Reprise en main et refonte de l\'intégralité de la partie frontend (templating/JS/CSS). Mise en place du preprocesseur Sass.',
            'Adaptation du site en Responsive Web Design',
            'Mise en place d\'un système de marque blanche, permettant de changer l\'apparence et les fonctionnalités du site en fonction de divers partenariats (tf1, eurosport...)',
            'Mis en place d\'un système de widgets, rendant exportable toute ou partie du site. Ces widgets sont des blocs de fonctionnalités (comme les « embed » youtube, facebook ou autre) affichés sur d\'autres sites. Chaque widget est personnalisable, tant niveau fonctionnalités qu\'apparence',
            'Mise en place de tests fonctionnels automatisés via casperJS',

        ],
    ],[
        'title' => '2011 / 2012',
        'start' => "2011-03-01",
        'end' => "2012-08-01",
        'job' => 'Développeur PHP/JS',
        'company' => 'Skyrock',
        'link' => 'http://www.skyrock.com',
        'area' => 'Paris',
        'tasks' => [
            'Contexte&nbsp;: site à fort traffic (plateforme de blog de 33 millions de comptes à l\'époque)',
            'JS&nbsp;: mise en place de bonnes pratiques (modules, AMD) et d\'un framework maison inspiré par certains concepts de facebook (primer & bootloader)',
            'PHP&nbsp;: mise en place de bonnes pratiques (MVC, routing) et du code équivalent',
            'Transfert des connaissances via des présentations techniques et fonctionnelles',
            'Lead technique en petite équipe sur divers projets, dont la refonte des pages profil des utilisateurs, les albums photos ou encore la refonte de l\'espace d\'administration',
        ],
    ],[


        'title' => '2008 / 2011',
        'start' => "2008-03-01",
        'end' => "2011-02-01",
        'job' => 'Développeur Web',
        'company' => 'Cosmic Communication</a>',
        'link' => 'http://agencecosmic.com',
        'area' => 'Paris',
        'tasks' => [
            'Développement d\'intranets, d\'extranets et de sites corporate. Contact principal des clients pour le suivi technique des projets et leur formation aux outils',
            'Développement d\'une application type e-commerce avec le framework Ruby on Rails',
            'Administration de serveurs LAMP&nbsp;: installation et configuration d\'Apache et ses modules, de MySql ou encore de PHP. Gestion des environnement des dev/recette/prod',
            'Gestion administrative et technique des noms de domaines, configuration des DNS',
        ],
    ],[


        'title' => '2006 / 2007',
        'start' => "2006-10-01",
        'end' => "2007-08-31",
        'job' => 'Chargé de Q/A et Opérations Spéciales',
        'company' => 'Pixtel',
        'link' => 'http://www.pixtel.fr',
        'area' => 'Paris',
        'tasks' => [
            'Responsable Q/A des données intégrées en BDD, coordination des différents intervenants',
            'Développement en C, adaptation et suivi des opérations interactives (WAP, Audiotel, SMS)',

        ],
    ],[

        'title' => '2003 / 2006',
        'start' => "2003-10-01",
        'end' => "2006-09-01",
        'job' => 'Développeur Junior',
        'company' => 'Pixtel',
        'link' => 'http://www.pixtel.fr',
        'area' => 'Paris',
        'tasks' => [
            'Développement en PHP/MySql du site web de l\'équipe de jeux vidéo « goodgame »',
            'Intégration du site persomobiles.com, de sites WAP, et de services audiotel en C',
            'Suivi fonctionnel et technique d\'opérations interactives (WAP, Audiotel, SMS)',
        ],
    ],[


        'title' => '2001 / 2003',
        'start' => "2001-10-01",
        'end' => "2003-09-01",
        'job' => 'Assistant Technique (apprentissage/alternance)',
        'company' => 'Pixtel',
        'link' => 'http://www.pixtel.fr',
        'area' => 'Paris',
        'tasks' => [
            'Développement en PHP/MySql du site web du cybercafé « Akyrion »',
            'Modification et suivi d\'opérations interactives Audiotel/Minitel',
        ],
    ]
];

foreach($experiences as &$experience){
    $experience = json_decode(json_encode($experience), FALSE);
}
unset($experience);

$skills = [
    [
        'title' => 'Langages',
        'detail' => 'Javascript, PHP5, Ruby, HTML5, CSS3, MySql, MongoDB, Bash Shell, C',
    ],[
        'title' => 'Environnements',
        'detail' => 'Symfony2, AngularJS, jQuery, Rails3, node.js, Sass/Less, ExpressJS, inuit.css, bootstrap, MODx',
    ],[
        'title' => 'Concepts',
        'detail' => 'Design patterns, MVC, versioning, CSS pre/post processing, OOCSS, Responsive Web Design, UX, tests utilisateurs, Single Page Application, dependency management, task/builder, NoSql, caching, scaling, SEO, méthodes agiles, expressions régulières, accessibilité/standards, problématiques navigateurs, performance web',
    ],[
        'title' => 'Outils',
        'detail' => 'Sublime Text, Git, Bower, SVN, composer, casperJS, npm, grunt/gulp, Microsoft Office, Suite Adobe, Vi(m)',
    ],[
        'title' => 'Langues',
        'detail' => 'Anglais (fluent), Allemand (scolaire)',
    ]
];

foreach($skills as &$skill){
    $skill = json_decode(json_encode($skill), FALSE);
}
unset($skill);

$formations = [
    [
        'title' => 'Actuellement',
        'detail' => 'Veille technologique, conférences (Parisweb, ParisJS, dotJS/CSS...)',
    ], [
        'title' => '2003',
        'detail' => 'DEUST multimedia et réseaux, gestion et réalisation (Université Paris II)',
    ], [
        'title' => '2000',
        'detail' => 'Baccalauréat scientifique',
    ]
];

foreach($formations as &$formation){
    $formation = json_decode(json_encode($formation), FALSE);
}
unset($formation);

function dateDiff2Str($startParam, $endParam="today") { 
    if (!$endParam){
        $end = "today";
    }

    $start = $startParam instanceof DateTime ? $startParam : new DateTime($startParam);
    $end = $endParam instanceof DateTime ? $endParam : new DateTime($endParam);
    
    $interval = $end->diff($start); 
    $doPlural = function($nb,$str){
        if ($str == "mois"){
            return $str;
        }
        return $nb>=2 ? $str . 's' : $str;
    };
    
    // https://stackoverflow.com/questions/3216482/round-down-to-nearest-half-integer-in-php
    $round = round($interval->m / 12 * 2) / 2;

    $nbYears = $interval->y + $round;

    if ($endParam == null){
        return "depuis " . $nbYears . " " . $doPlural($nbYears, "an");
    }

    return $nbYears . " " . $doPlural($nbYears, "an");

} 
